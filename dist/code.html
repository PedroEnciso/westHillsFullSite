<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>West Hills | Code</title>
    <link rel="stylesheet" href="./src/tailwind.css">
    <link rel="stylesheet" href="./prism/prism.css">

</head>
<body>
    <main class="w-full bg-black pb-16">
        <nav class="w-9/12 md:w-3/5 mx-auto pt-10 sm:pt-6 ">
            <ul class="list-none flex justify-between sm:justify-start">
                <a href="index.html"><li class="font-sans text-lg text-white mx-6 pb-4 px-2 cursor-pointer hover:text-gray-400">Home</li></a>
                <li class="font-sans text-lg text-white mx-6 pb-3 px-2 border-b-2">Code</li>
                <a href="https://github.com/PedroEnciso/westHillsFullSite" target="_blank"><li class="font-sans text-lg text-white mx-6 pb-4 px-2 cursor-pointer hover:text-gray-400">Git</li></a>
            </ul>
        </nav>

        <div class="w-4/5 md:w-1/2 mx-auto pt-16">
            <h1 class="font-sans text-5xl text-white text-center">My Javascript Code</h1>
            <p class="font-sans text-lg text-white text-center pt-4">This is everything happening under the hood.</p>
        </div>

        <div class="w-4/5 md:w-1/2 mx-auto mt-8">
            <pre class="border-4 border-gray-700 rounded">
                <code class="language-javascript">
                    "use strict"

                    //get the height of the game container to create equal increments
                    let gameContainer = document.getElementById('game-container');
                    let containerInfo = gameContainer.getBoundingClientRect();
                    const INCREMENT = (containerInfo.height - 25) / 9;


                    const input = document. querySelectorAll('input');
                    //add an event listener to each input box;
                    input[0].addEventListener('input', updateHeight);
                    input[1].addEventListener('input', updateHeight);
                    input[2].addEventListener('input', updateHeight);
                    input[3].addEventListener('input', updateHeight);
                    input[4].addEventListener('input', updateHeight);
                    input[5].addEventListener('input', updateHeight);
                    input[6].addEventListener('input', updateHeight);
                    input[7].addEventListener('input', updateHeight);


                    //the main function of the game
                    function updateHeight() {
                        for(let i = 0; i < input.length; i++) {
                            changeHeight(i);
                            canSeeView(i);
                        }
                    }


                    //initializing all variables to be used
                    let buildingId;
                    let number;
                    let building;
                    let buildingInfo;
                    let buildingHeight;
                    let buildingIncrement;

                    //change building height when input is changed
                    function changeHeight(i) {
                        number = i + 1;
                        buildingId = "building" + number;
                        building = document.getElementById(buildingId);
                        buildingInfo = building.getBoundingClientRect();
                        buildingHeight = buildingInfo.height;
                        buildingIncrement = parseInt(input[i].value) * INCREMENT + 35;

                        if(input[i].value == 0) { 
                            document.getElementById(buildingId).style.height = "35px";
                        }
                        else {
                            document.getElementById(buildingId).style.height = buildingIncrement + "px";
                        }
                    }

                    //determine the buildings color
                    let tallestBuilding;
                    function canSeeView(i) {
                        //the first building will always see the view 
                        if (i == 0) {
                            tallestBuilding = input[0].value;
                            return;
                        }

                        let value = input[i].value;
                        if(value > tallestBuilding) {
                            number = i + 1;
                            buildingId = "building" + number;
                            document.getElementById(buildingId).style.background = "rgb(5, 150, 105)";
                            tallestBuilding = input[i].value;
                        }
                        else {
                            number = i + 1;
                            buildingId = "building" + number;
                            document.getElementById(buildingId).style.background = "rgb(156, 163, 175)";
                        }
                    }
                </code>
            </pre>
        </div>
    </main>
    
    <script src="./prism/prism.js"></script>
</body>
</html>